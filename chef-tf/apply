root@terraform:~/gcp/chef-tf# terraform apply
google_compute_instance.default: Refreshing state... (ID: test-cf)

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
-/+ destroy and then create replacement

Terraform will perform the following actions:

-/+ google_compute_instance.default (tainted) (new resource required)
      id:                                                  "test-cf" => <computed> (forces new resource)
      boot_disk.#:                                         "1" => "1"
      boot_disk.0.auto_delete:                             "true" => "true"
      boot_disk.0.device_name:                             "persistent-disk-0" => <computed>
      boot_disk.0.disk_encryption_key_sha256:              "" => <computed>
      boot_disk.0.initialize_params.#:                     "1" => "1"
      boot_disk.0.initialize_params.0.image:               "https://www.googleapis.com/compute/v1/projects/debian-cloud/global/images/debian-9-stretch-v20181210" => "debian-cloud/debian-9"
      boot_disk.0.initialize_params.0.size:                "10" => <computed>
      boot_disk.0.initialize_params.0.type:                "pd-standard" => <computed>
      can_ip_forward:                                      "false" => "false"
      cpu_platform:                                        "Intel Skylake" => <computed>
      create_timeout:                                      "4" => "4"
      deletion_protection:                                 "false" => "false"
      guest_accelerator.#:                                 "0" => <computed>
      instance_id:                                         "4066427445509694875" => <computed>
      label_fingerprint:                                   "42WmSpB8rSM=" => <computed>
      machine_type:                                        "n1-standard-1" => "n1-standard-1"
      metadata.%:                                          "1" => "1"
      metadata.sshKeys:                                    "niharika:ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEAio01LN0IZxGseT80BPLm9U9zy3fcuUvUlnHxf58nb5Rj5UFeRdm8pin/x6gASBbljjdSbAzob0h4cAEfH6lsQu/ozOPD4RPf1IXod5FuISkYW5YVU17/snIbM9ie9cnuOLyeHAlBb0msUJpUXoxIMOKrlRdExgJQTwN762L8VMWYiyR986lHv7Fi1l02OA5AaWjRfKRrLdDDm1Xy9g6R+91v1E3sT46FI66c+rkmF1aqT+370RYm3CtQvAyTuX3ktgMF/6sj7mdKgaZw4ujMehMZ0gUbMDNf+FazQ7j47eMTkCYPIDZsP0ONj0Ov2984+A+6kFM0P7sywn9wDxL76w== niharika\n" => "niharika:ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEAio01LN0IZxGseT80BPLm9U9zy3fcuUvUlnHxf58nb5Rj5UFeRdm8pin/x6gASBbljjdSbAzob0h4cAEfH6lsQu/ozOPD4RPf1IXod5FuISkYW5YVU17/snIbM9ie9cnuOLyeHAlBb0msUJpUXoxIMOKrlRdExgJQTwN762L8VMWYiyR986lHv7Fi1l02OA5AaWjRfKRrLdDDm1Xy9g6R+91v1E3sT46FI66c+rkmF1aqT+370RYm3CtQvAyTuX3ktgMF/6sj7mdKgaZw4ujMehMZ0gUbMDNf+FazQ7j47eMTkCYPIDZsP0ONj0Ov2984+A+6kFM0P7sywn9wDxL76w== niharika\n"
      metadata_fingerprint:                                "DLGGMqjm7z4=" => <computed>
      name:                                                "test-cf" => "test-cf"
      network_interface.#:                                 "1" => "1"
      network_interface.0.access_config.#:                 "1" => "1"
      network_interface.0.access_config.0.assigned_nat_ip: "35.235.67.220" => <computed>
      network_interface.0.access_config.0.nat_ip:          "35.235.67.220" => <computed>
      network_interface.0.access_config.0.network_tier:    "PREMIUM" => <computed>
      network_interface.0.address:                         "10.168.0.2" => <computed>
      network_interface.0.name:                            "nic0" => <computed>
      network_interface.0.network:                         "https://www.googleapis.com/compute/v1/projects/proj-211305/global/networks/default" => "default"
      network_interface.0.network_ip:                      "10.168.0.2" => <computed>
      network_interface.0.subnetwork_project:              "proj-211305" => <computed>
      project:                                             "proj-211305" => <computed>
      scheduling.#:                                        "1" => <computed>
      self_link:                                           "https://www.googleapis.com/compute/v1/projects/proj-211305/zones/us-west2-a/instances/test-cf" => <computed>
      service_account.#:                                   "1" => "1"
      service_account.0.email:                             "948561684864-compute@developer.gserviceaccount.com" => <computed>
      service_account.0.scopes.#:                          "3" => "3"
      service_account.0.scopes.1632638332:                 "https://www.googleapis.com/auth/devstorage.read_only" => "https://www.googleapis.com/auth/devstorage.read_only"
      service_account.0.scopes.2428168921:                 "https://www.googleapis.com/auth/userinfo.email" => "https://www.googleapis.com/auth/userinfo.email"
      service_account.0.scopes.2862113455:                 "https://www.googleapis.com/auth/compute.readonly" => "https://www.googleapis.com/auth/compute.readonly"
      tags_fingerprint:                                    "42WmSpB8rSM=" => <computed>
      zone:                                                "us-west2-a" => "us-west2-a"


Plan: 1 to add, 0 to change, 1 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

google_compute_instance.default: Destroying... (ID: test-cf)
google_compute_instance.default: Still destroying... (ID: test-cf, 10s elapsed)
google_compute_instance.default: Still destroying... (ID: test-cf, 20s elapsed)
google_compute_instance.default: Destruction complete after 26s
google_compute_instance.default: Creating...
  boot_disk.#:                                         "" => "1"
  boot_disk.0.auto_delete:                             "" => "true"
  boot_disk.0.device_name:                             "" => "<computed>"
  boot_disk.0.disk_encryption_key_sha256:              "" => "<computed>"
  boot_disk.0.initialize_params.#:                     "" => "1"
  boot_disk.0.initialize_params.0.image:               "" => "debian-cloud/debian-9"
  boot_disk.0.initialize_params.0.size:                "" => "<computed>"
  boot_disk.0.initialize_params.0.type:                "" => "<computed>"
  can_ip_forward:                                      "" => "false"
  cpu_platform:                                        "" => "<computed>"
  create_timeout:                                      "" => "4"
  deletion_protection:                                 "" => "false"
  guest_accelerator.#:                                 "" => "<computed>"
  instance_id:                                         "" => "<computed>"
  label_fingerprint:                                   "" => "<computed>"
  machine_type:                                        "" => "n1-standard-1"
  metadata.%:                                          "" => "1"
  metadata.sshKeys:                                    "" => "niharika:ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEAio01LN0IZxGseT80BPLm9U9zy3fcuUvUlnHxf58nb5Rj5UFeRdm8pin/x6gASBbljjdSbAzob0h4cAEfH6lsQu/ozOPD4RPf1IXod5FuISkYW5YVU17/snIbM9ie9cnuOLyeHAlBb0msUJpUXoxIMOKrlRdExgJQTwN762L8VMWYiyR986lHv7Fi1l02OA5AaWjRfKRrLdDDm1Xy9g6R+91v1E3sT46FI66c+rkmF1aqT+370RYm3CtQvAyTuX3ktgMF/6sj7mdKgaZw4ujMehMZ0gUbMDNf+FazQ7j47eMTkCYPIDZsP0ONj0Ov2984+A+6kFM0P7sywn9wDxL76w== niharika\n"
  metadata_fingerprint:                                "" => "<computed>"
  name:                                                "" => "test-cf"
  network_interface.#:                                 "" => "1"
  network_interface.0.access_config.#:                 "" => "1"
  network_interface.0.access_config.0.assigned_nat_ip: "" => "<computed>"
  network_interface.0.access_config.0.nat_ip:          "" => "<computed>"
  network_interface.0.access_config.0.network_tier:    "" => "<computed>"
  network_interface.0.address:                         "" => "<computed>"
  network_interface.0.name:                            "" => "<computed>"
  network_interface.0.network:                         "" => "default"
  network_interface.0.network_ip:                      "" => "<computed>"
  network_interface.0.subnetwork_project:              "" => "<computed>"
  project:                                             "" => "<computed>"
  scheduling.#:                                        "" => "<computed>"
  self_link:                                           "" => "<computed>"
  service_account.#:                                   "" => "1"
  service_account.0.email:                             "" => "<computed>"
  service_account.0.scopes.#:                          "" => "3"
  service_account.0.scopes.1632638332:                 "" => "https://www.googleapis.com/auth/devstorage.read_only"
  service_account.0.scopes.2428168921:                 "" => "https://www.googleapis.com/auth/userinfo.email"
  service_account.0.scopes.2862113455:                 "" => "https://www.googleapis.com/auth/compute.readonly"
  tags_fingerprint:                                    "" => "<computed>"
  zone:                                                "" => "us-west2-a"
google_compute_instance.default: Still creating... (10s elapsed)
google_compute_instance.default: Provisioning with 'chef'...
google_compute_instance.default (chef): Connecting to remote host via SSH...
google_compute_instance.default (chef):   Host: 35.236.33.199
google_compute_instance.default (chef):   User: niharika
google_compute_instance.default (chef):   Password: false
google_compute_instance.default (chef):   Private key: true
google_compute_instance.default (chef):   SSH Agent: false
google_compute_instance.default (chef):   Checking Host Key: false
google_compute_instance.default (chef): Connecting to remote host via SSH...
google_compute_instance.default (chef):   Host: 35.236.33.199
google_compute_instance.default (chef):   User: niharika
google_compute_instance.default (chef):   Password: false
google_compute_instance.default (chef):   Private key: true
google_compute_instance.default (chef):   SSH Agent: false
google_compute_instance.default (chef):   Checking Host Key: false
google_compute_instance.default (chef): Connecting to remote host via SSH...
google_compute_instance.default (chef):   Host: 35.236.33.199
google_compute_instance.default (chef):   User: niharika
google_compute_instance.default (chef):   Password: false
google_compute_instance.default (chef):   Private key: true
google_compute_instance.default (chef):   SSH Agent: false
google_compute_instance.default (chef):   Checking Host Key: false
google_compute_instance.default (chef): Connected!
google_compute_instance.default (chef):   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
google_compute_instance.default (chef):                                  Dload  Upload   Total   Spent    Left  Speed
google_compute_instance.default (chef):   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
google_compute_instance.default (chef): 100 23103  100 23103    0     0   585k      0 --:--:-- --:--:-- --:--:--  593k
google_compute_instance.default (chef): debian 9 x86_64
google_compute_instance.default (chef): Getting information for chef stable  for debian...
google_compute_instance.default (chef): downloading https://omnitruck.chef.io/stable/chef/metadata?v=&p=debian&pv=9&m=x86_64
google_compute_instance.default (chef):   to file /tmp/install.sh.761/metadata.txt
google_compute_instance.default (chef): trying wget...
google_compute_instance.default (chef): sha1    cc9a41f344782c624a5547561f713e38535912d1
google_compute_instance.default (chef): sha256  1184fb1445f416b27b3faa34f957df56dd3e6cc4946f5401573b7c59e85255dc
google_compute_instance.default (chef): url     https://packages.chef.io/files/stable/chef/14.8.12/debian/9/chef_14.8.12-1_amd64.deb
google_compute_instance.default (chef): version 14.8.12
google_compute_instance.default (chef): downloaded metadata file looks valid...
google_compute_instance.default (chef): downloading https://packages.chef.io/files/stable/chef/14.8.12/debian/9/chef_14.8.12-1_amd64.deb
google_compute_instance.default (chef):   to file /tmp/install.sh.761/chef_14.8.12-1_amd64.deb
google_compute_instance.default (chef): trying wget...
google_compute_instance.default (chef): Comparing checksum with sha256sum...

google_compute_instance.default (chef): WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING

google_compute_instance.default (chef): You are installing an omnibus package without a version pin.  If you are installing
google_compute_instance.default (chef): on production servers via an automated process this is DANGEROUS and you will
google_compute_instance.default (chef): be upgraded without warning on new releases, even to new major releases.
google_compute_instance.default (chef): Letting the version float is only appropriate in desktop, test, development or
google_compute_instance.default (chef): CI/CD environments.

google_compute_instance.default (chef): WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING WARNING

google_compute_instance.default (chef): Installing chef
google_compute_instance.default (chef): installing with dpkg...
google_compute_instance.default (chef): Selecting previously unselected package chef.
google_compute_instance.default (chef): (Reading database ...
google_compute_instance.default (chef): (Reading database ... 5%
google_compute_instance.default (chef): (Reading database ... 10%
google_compute_instance.default (chef): (Reading database ... 15%
google_compute_instance.default (chef): (Reading database ... 20%
google_compute_instance.default (chef): (Reading database ... 25%
google_compute_instance.default (chef): (Reading database ... 30%
google_compute_instance.default (chef): (Reading database ... 35%
google_compute_instance.default (chef): (Reading database ... 40%
google_compute_instance.default (chef): (Reading database ... 45%
google_compute_instance.default (chef): (Reading database ... 50%
google_compute_instance.default (chef): (Reading database ... 55%
google_compute_instance.default (chef): (Reading database ... 60%
google_compute_instance.default (chef): (Reading database ... 65%
google_compute_instance.default (chef): (Reading database ... 70%
google_compute_instance.default (chef): (Reading database ... 75%
google_compute_instance.default (chef): (Reading database ... 80%
google_compute_instance.default (chef): (Reading database ... 85%
google_compute_instance.default (chef): (Reading database ... 90%
google_compute_instance.default (chef): (Reading database ... 95%
google_compute_instance.default (chef): (Reading database ... 100%
google_compute_instance.default (chef): (Reading database ... 33997 files and directories currently installed.)
google_compute_instance.default (chef): Preparing to unpack .../chef_14.8.12-1_amd64.deb ...
google_compute_instance.default (chef): Unpacking chef (14.8.12-1) ...
google_compute_instance.default: Still creating... (20s elapsed)
google_compute_instance.default (chef): Setting up chef (14.8.12-1) ...
google_compute_instance.default (chef): Thank you for installing Chef!
google_compute_instance.default (chef): Creating configuration files...
google_compute_instance.default (chef): Fetch Chef certificates...
google_compute_instance.default (chef): WARNING: Certificates from api.chef.io will be fetched and placed in your trusted_cert
google_compute_instance.default (chef): directory (/etc/chef/trusted_certs).

google_compute_instance.default (chef): Knife has no means to verify these are the correct certificates. You should
google_compute_instance.default (chef): verify the authenticity of these certificates after downloading.

google_compute_instance.default (chef): Adding certificate for wildcard_opscode_com in /etc/chef/trusted_certs/wildcard_opscode_com.crt
google_compute_instance.default (chef): Adding certificate for DigiCert_SHA2_Secure_Server_CA in /etc/chef/trusted_certs/DigiCert_SHA2_Secure_Server_CA.crt
google_compute_instance.default (chef): Generate the private key...
google_compute_instance.default: Still creating... (30s elapsed)
google_compute_instance.default (chef): Created client[test-node]
google_compute_instance.default (chef): Cleanup user key...
google_compute_instance.default (chef): Starting initial Chef-Client run...
google_compute_instance.default (chef): Starting Chef Client, version 14.8.12
google_compute_instance.default (chef): resolving cookbooks for run list: ["nginx::default"]
google_compute_instance.default (chef): Synchronizing Cookbooks:
google_compute_instance.default (chef):   - nginx (0.1.0)
google_compute_instance.default (chef):   - apt (0.1.0)
google_compute_instance.default (chef): Installing Cookbook Gems:
google_compute_instance.default (chef): Compiling Cookbooks...
google_compute_instance.default (chef): Converging 2 resources
google_compute_instance.default (chef): Recipe: nginx::default
google_compute_instance.default (chef):   * apt_package[nginx] action install
google_compute_instance.default: Still creating... (40s elapsed)

google_compute_instance.default (chef):     - install version 1.10.3-1+deb9u2 of package nginx
google_compute_instance.default (chef):   * service[nginx] action enable (up to date)
google_compute_instance.default (chef):   * service[nginx] action start (up to date)
google_compute_instance.default (chef):
google_compute_instance.default (chef): Running handlers:
google_compute_instance.default (chef): Running handlers complete
google_compute_instance.default (chef): Chef Client finished, 1/3 resources updated in 15 seconds
google_compute_instance.default: Creation complete after 48s (ID: test-cf)

Apply complete! Resources: 1 added, 0 changed, 1 destroyed.

